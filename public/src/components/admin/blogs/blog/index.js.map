{"version":3,"sources":["components/admin/blogs/blog/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { BlogService } from '../../../../services/blog';\nimport { AuthService } from '../../../../services/auth';\n\ndeclare var $: any;\ndeclare var CKEDITOR: any;\n\n@Component({\n    selector: 'blog-management',\n    templateUrl: 'src/components/admin/blogs/blog/index.html',\n    providers: [ BlogService ]\n})\n\nexport class BlogManagement implements OnInit, OnDestroy {\n    blog: any = {};\n    action: string = '';\n    _id: any;\n    private sub: any;\n\n    constructor(private blogService: BlogService, private route: ActivatedRoute,\n        private router: Router, private authService: AuthService) {\n        console.info('Blog Management Component Mounted Successfully');\n    }\n\n    ngOnInit() {\n        var self = this;\n\n        self.sub = self.route.params.subscribe(params => {\n            self.action = params['action'];\n            self._id = params['id'];\n        });\n    }\n\n    ngAfterViewInit() {\n        // Component views are initialized\n        var self = this;\n        if (self.action === 'add' || self.action === 'edit') {\n            CKEDITOR.replace('content');\n        }\n        if (self.action === 'edit' || self.action === 'view') {\n            self.blogService.getBlog(self._id)\n                .then((blog) => {\n                    self.blog = blog;\n                    if (self.action === 'edit') {\n                        setTimeout(function() {\n                            CKEDITOR.instances.content.setData(self.blog.content);\n                        }, 100);\n                    }\n                }).catch((err) => { console.error(err); });\n        }\n    }\n\n    ngOnDestroy() {\n        this.sub.unsubscribe();\n    }\n\n    submit(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        var self = this;\n        var currentUser = self.authService.getAccount();\n        self.blog.content = CKEDITOR.instances.content.getData();\n        if (self.blog._id) {\n            self.blog.updatedBy = currentUser.name || currentUser.username || currentUser.email;\n            self.blogService.updateBlog(self.blog)\n                .then((blog) => { self.router.navigate(['/admin/blog']); })\n                .catch((err) => { console.error(err); });\n        } else {\n            self.blog.createdBy = currentUser.name || currentUser.username || currentUser.email;\n            self.blogService.createBlog(self.blog)\n                .then((blog) => { self.router.navigate(['/admin/blog']); })\n                .catch((err) => { console.error(err); });\n        }\n    }\n\n    cancel(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.router.navigate(['/admin/blog']);\n    }\n\n}\n"]}