{"version":3,"sources":["components/signin/index.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA0B,eAAe,CAAC,CAAA;AAC1C,uBAAuB,iBAAiB,CAAC,CAAA;AACzC,qBAA4B,qBAAqB,CAAC,CAAA;AAClD,uBAAuB,cAAc,CAAC,CAAA;AAStC;IAOI,gBAAoB,WAAwB,EAAU,MAAc;QAAhD,gBAAW,GAAX,WAAW,CAAa;QAAU,WAAM,GAAN,MAAM,CAAQ;QAN5D,WAAM,GAAG,eAAM,CAAC;QACxB,gBAAW,GAAG;YACV,QAAQ,EAAE,EAAE;YACZ,QAAQ,EAAE,EAAE;SACf,CAAA;QAUD,WAAM,GAAG;YACL,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC;iBAC9C,IAAI,CACD;gBACI,2BAA2B;gBAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACrC,CAAC,EACD,UAAS,KAAK;gBACV,qBAAqB;gBACrB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YAC7B,CAAC,CAAC,CAAC;QACX,CAAC,CAAA;QAED,iBAAY,GAAG,UAAS,QAAQ;YAC5B,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;YAE7C,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,UAAS,IAAI;gBAC/C,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE;oBACrB,KAAK,EAAE,IAAI,CAAC,KAAK;iBACpB,CAAC,CAAC,IAAI,CAAC,UAAS,CAAC;oBACd,gDAAgD;oBAChD,qBAAqB;oBACrB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC;wBAC3B,IAAI,EAAE,CAAC,CAAC,IAAI;wBACZ,QAAQ,EAAE,CAAC,CAAC,QAAQ;wBACpB,WAAW,EAAE,CAAC,CAAC,cAAc,CAAC;wBAC9B,UAAU,EAAE,CAAE,IAAI,CAAC,KAAK,CAAE;qBAC7B,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI;wBACjB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;wBAC5B,MAAM,CAAC,IAAI,CAAC;oBAChB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAS,CAAC;wBACf,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACnB,CAAC,CAAC,CAAC;gBACX,CAAC,CAAC,CAAC,IAAI,CAAC,UAAS,CAAC;oBACd,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnB,CAAC,CAAC,CAAC;YACX,CAAC,CAAC,CAAC,KAAK,CAAC,UAAS,CAAC;gBACf,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAhDE,OAAO,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;QACvD,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACpC,CAAC;IACL,CAAC;IAlBL;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,SAAS;YACnB,WAAW,EAAE,kCAAkC;SAClD,CAAC;;cAAA;IA4DF,aAAC;AAAD,CA1DA,AA0DC,IAAA;AA1DY,cAAM,SA0DlB,CAAA","file":"index.js","sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth';\nimport { Config } from '../../config';\n\ndeclare var OAuth: any;\n\n@Component({\n    selector: 'sign-in',\n    templateUrl: 'src/components/signin/index.html'\n})\n\nexport class SignIn {\n    private config = Config;\n    credentials = {\n        username: '',\n        password: ''\n    }\n    signInError: string;\n    constructor(private authService: AuthService, private router: Router) {\n        console.info('Sign In Component Mounted Successfully');\n        this.signInError = '';\n        if (this.authService.authenticated()) {\n            this.router.navigate(['/home']);\n        }\n    }\n\n    signIn = function() {\n        var self = this;\n        self.authService.authenticate(self.credentials)\n        .then(\n            function() {\n                // Authenticate successful.\n                self.router.navigate(['/admin']);\n            },\n            function(error) {\n                // Authenticate fail.\n                self.signInError = error;\n            });\n    }\n\n    socialSignin = function(provider) {\n        var self = this;\n        OAuth.initialize(self.config.oauthPublicKey);\n\n        self.authService.retrieveToken().then(function(data) {\n            return OAuth.popup(provider, {\n                    state: data.token\n                }).done(function(r) {\n                    // Sends the code to the authentication endpoint\n                    // we created earlier\n                    return self.authService.loginOAuth({\n                            code: r.code,\n                            provider: r.provider,\n                            accessToken: r['access_token'],\n                            csrfTokens: [ data.token ]\n                        }).then(function(data) {\n                            self.router.navigate(['/']);\n                            return data;\n                        }).catch(function(e) {\n                            console.log(e);\n                        });\n                }).fail(function(e) {\n                    console.log(e);\n                });\n        }).catch(function(e) {\n            console.log(e);\n        });\n    };\n\n}\n"]}